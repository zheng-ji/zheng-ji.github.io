<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>织网</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="织网">
<meta property="og:url" content="http://yoursite.com/page/10/index.html">
<meta property="og:site_name" content="织网">
<meta property="og:locale">
<meta property="article:author" content="zheng-ji">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="织网" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">织网</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2014-01-24-&lt;&lt;rework&gt;&gt;-shu-zhai" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/24/2014-01-24-%3C%3Crework%3E%3E-shu-zhai/" class="article-date">
  <time datetime="2014-01-24T14:31:00.000Z" itemprop="datePublished">2014-01-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Life/">Life</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/24/2014-01-24-%3C%3Crework%3E%3E-shu-zhai/">Rework书摘</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>读到ReWork这本久负盛名的书了。摘录了鄙人认为深刻的话语。</p>
<img src="/images/2014/01/rework.jpg" class="">

<p>很多话有道理，但是我们见到的只有很少人真的会去做，至少是去刻意克服惰性和思维方式.</p>
<p>该书是由37signal 这个创造了很多精品的公司著作的。有很强的现实指导意义，以下摘自《rework》</p>
<ul>
<li>谈到现实</li>
</ul>
<blockquote>
<p>撕开这个“现实世界”的遮羞布后，你会发现栖居其中的人们都充满着悲观和绝望的情绪。他们期待看到新概念被斩落马下，他们认为这个社会还没有准备好迎接变革，也无力引发变革.不要相信他们。这个世界对于他们来说可能是“现实”的，但并不意味着你也要生活在这样的“现实”世界中。</p>
</blockquote>
<ul>
<li>谈到抱怨</li>
</ul>
<blockquote>
<p>条件受限是好事 ，因此，在你高唱“始终不够”的悲观论调之前，请试试看自己利用现有的资源能走多远。没有一点浪费的空间，一切都需要你发挥最大的创造力</p>
</blockquote>
<ul>
<li>谈到害怕失败</li>
</ul>
<blockquote>
<p>有种说法也十分常见：“你的退出策略是什么？（万一不成功，你怎么办？）”甚至在你刚刚准备起步时就会有人这样问你。一个连事业都没创立起来的人，就在考虑如何拔腿逃跑，到底在搞什么？至于那么着急吗？还没有进去就想着怎么出来，这种逻辑不是一般的混乱！</p>
</blockquote>
<ul>
<li>专注做好一件事</li>
</ul>
<blockquote>
<p>同时做N件事情的结果就是：一大把绝妙的点子最后被转化成一个蹩脚的产品。人不可能同时做所有的事情，并把事情做好。你的时间、资源、精力、注意力都是有限的。 一次做好一件事就已经不容易了。想一次做十件事？拉倒吧！从核心出发当你开始着手做一件事情时，总有一些力量将你拉向不同的方向。这当中包括你能做的、你想做的以及你必须做的事情。你应该从必须做的事情开始下手，即从核心出发</p>
</blockquote>
<ul>
<li>过早关注细节</li>
</ul>
<blockquote>
<p>不要过早关注细节.建筑师们从来不会过早去操心浴室要铺什么样的瓷砖、厨房要安什么牌子的洗碗机，这都是在平面图确定了以后才需要考虑的事。他们深知这些细节应该放到以后去考虑。</p>
</blockquote>
<ul>
<li>项目周期的把控</li>
</ul>
<blockquote>
<p>项目周期过长会打击士气。项目开发时间越长，成功的可能性越小。只要有足够的动力和士气，就要趁热打铁，积极决策，果断推进，现在就把事情做出来 </p>
</blockquote>
<ul>
<li>把握本质的功能</li>
</ul>
<blockquote>
<p>要记住，时尚会凋零。只有当你聚焦于长久的功能时，你才会发现自己把握住了永不落伍的东西</p>
</blockquote>
<ul>
<li>尽快上线</li>
</ul>
<blockquote>
<p>立马就上线你的产品或服务什么时候能做出来？你打算什么时候把它推向市场？什么时候能让人们拥有它？可能比你想象的要早得多。一旦你的产品实现了基本的功能，就要迅速把它亮出来</p>
</blockquote>
<ul>
<li>打磨你的想法</li>
</ul>
<blockquote>
<p>一个新创意的撩人程度并不代表其真实价值。有些东西现在看上去是“非要不可”，但是到了第二天早上，可能就会降级为“可有可无”。而“可有可无”的东西是不值得你不顾一切去做的。</p>
</blockquote>
<ul>
<li>珍惜努力的你</li>
</ul>
<blockquote>
<p>现在的你籍籍无名，这是件好事。籍籍无名就是一个绝佳的状态，你要庆幸自己目前还身在暗处。 </p>
</blockquote>
<ul>
<li>关于招聘</li>
</ul>
<blockquote>
<p>在37signals，我们一直没有雇用系统管理员，直到我们当中的一个人花了整整一个夏天的时间去设置一大堆服务器为止。在开始的3年时间里，我们中的另一个人做了所有的客服工作。之后我们才雇用了一名专职的客服人员。在把球传出去之前，我们都尽可能亲自带球。这样一来，我们在决定招聘时，就十分清楚自己到底需要什么样的员工了。</p>
</blockquote>
<blockquote>
<p>但是在那之后，成长曲线就开始趋于平缓了。一个具有6个月工作经验的应聘者和一个具有6年工作经验的应聘者相比.其差别小得令人吃惊。真正的差别来自于个人的努力程度、性格差异以及智力水平</p>
</blockquote>
<blockquote>
<p>常规教育不值一提我从来不把我自己受过的正规学校教育等同于我的受教育程度。——马克·吐温</p>
</blockquote>
<blockquote>
<p>一个优秀的写手，其优点并不仅仅在于写作。文法清晰代表思路明晰。优秀的写手都懂得如何与人沟通。他们使事情变得易于理解，他们善于换位思考，懂得抓重点、砍枝节，这些都是合格的应聘者身上应具备的特点</p>
</blockquote>
<ul>
<li>高效率工作</li>
</ul>
<blockquote>
<p>就像谚语说的：“想要做成一件事，就去找你能找到的最忙碌的人。”你需要忙忙碌碌的人、需要有业余生活的人、需要关注好几件事情的人。你不能期望工作成为一个人生命的全部——至少你不愿意长期和这样的人共处。 </p>
</blockquote>
<ul>
<li>小公司不应该被制度毒害</li>
</ul>
<blockquote>
<p>规章制度是组织机体上的伤疤。它们是针对一种不太可能再次发生的情况而作出的过激反应，是对个人过失的一种集体惩罚。官僚主义便是因此而产生的。没有人一开始就想要官僚，这些东西都是慢慢侵蚀进来的。每次制定一项规章制度——也就是伤疤——官僚主义就滋生一点。  </p>
</blockquote>
<ul>
<li>团队合作的氛围</li>
</ul>
<blockquote>
<p>“我们现在就得把这个功能加进去，没有这个功能我们就不能做了，每个人都想要它，这只是小事一桩，所以应该很简单，你应该能够很快把它做出来。”就这么区区60个字，却可引出100种假设，这就是祸端。</p>
</blockquote>
<ul>
<li>抓住灵感</li>
</ul>
<blockquote>
<p>灵感是个奇妙的东西，是效率放大器，是推进器。但是它不会停下来等你。灵感转瞬即逝，当它来找你时，要立即把它捕捉住，将其投入工作中去。 </p>
</blockquote>
<p>———————————————————- 我是分割线 ————————————————————–</p>
<p>推荐：<br> 最近看到的<a target="_blank" rel="noopener" href="http://book.douban.com/subject/25735727/">《站在两个世界的边缘》</a> 深深被程浩打动了。末尾引用一句他的话，向其致敬。</p>
<blockquote>
<p>“真正牛逼的，不是那些可以随口拿来夸耀的事迹，而是那些在困境中依然保持微笑的凡人。” - by 程浩</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/01/24/2014-01-24-%3C%3Crework%3E%3E-shu-zhai/" data-id="clnfj8m1d001u30qxbmnw763d" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2014-01-07-wei-xin-gong-zhong-hao-kai-fa" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/07/2014-01-07-wei-xin-gong-zhong-hao-kai-fa/" class="article-date">
  <time datetime="2014-01-07T10:47:00.000Z" itemprop="datePublished">2014-01-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Product/">Product</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/07/2014-01-07-wei-xin-gong-zhong-hao-kai-fa/">微信公众号开发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="微信公众账号开发"><a href="#微信公众账号开发" class="headerlink" title="微信公众账号开发"></a>微信公众账号开发</h3><p>话说2013年的最后几分钟和2014的最开始几分钟我都是献给这货的.BTW,纯属个人折腾</p>
<blockquote>
<p>人生苦短,我爱python</p>
</blockquote>
<p>至于做的具体东西就在此略过了,以下是截图.主要是分享开发过程中的经验,我的代码是部署在自己的VPS上面</p>
<img src="/images/2013/12/nba.jpg" class="">

<p>现在注册一个微信的服务号的成本很高了,一次人工审批不过的话就需要300元, 我用的是微信公众平台测试号.只要填写手机号和验证码。其限制条件是,只能有20个订阅粉丝.没关系,我要的是调通整个通讯以及业务化定制.</p>
<p>#####注册<br>会给你一个 <code>APPID</code>, <code>APPSeceret</code>,这个步骤需要你填写自己 Server 的 URL,以及填写 <code>TOKEN</code>,这些是未来完成通讯的许可证明</p>
<p>#####微信认证<br>Server 端应该对每个请求进行验证，确认是来自微信服务器的请求才做出相应</p>
<p>加密&#x2F;校验流程如下：</p>
<ul>
<li>将 <code>token</code>、<code>timestamp</code>、<code>nonce</code> 三个参数进行字典序排序</li>
<li>将三个参数字符串拼接成一个字符串进行sha1加密</li>
<li>开发者获得加密后的字符串可与 <code>signature</code> 对比，标识该请求来源于微信</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BaseHandler</span>(tornado.web.RequestHandler):</span><br><span class="line">    <span class="comment">#基类,实现基本认证，子类只需要继承就可以完成微信认证</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">prepare</span>(<span class="params">self</span>):</span><br><span class="line">        timestamp = self.get_argument(<span class="string">&quot;timestamp&quot;</span>, <span class="literal">None</span>)</span><br><span class="line">        nonce = self.get_argument(<span class="string">&quot;nonce&quot;</span>, <span class="literal">None</span>)</span><br><span class="line">        signature = self.get_argument(<span class="string">&quot;signature&quot;</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;request:&#x27;</span>, timestamp, nonce, signature</span><br><span class="line">        <span class="built_in">print</span> self.request.method, timestamp, nonce, signature</span><br><span class="line">        <span class="keyword">if</span> validate(timestamp, nonce, signature) <span class="keyword">is</span> <span class="literal">False</span>:</span><br><span class="line">            <span class="built_in">print</span> <span class="string">&quot;=========validate failed =====&quot;</span></span><br><span class="line">            self.finish()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">validate</span>(<span class="params">timestamp, nonce, signature</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;validate:&#x27;</span>, timestamp, nonce, signature</span><br><span class="line">    <span class="keyword">if</span> timestamp <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> nonce <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> signature <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    tmp = [TOKEN, timestamp, nonce]</span><br><span class="line">    tmp = <span class="built_in">sorted</span>(tmparr)</span><br><span class="line">    tmpStr = <span class="string">&#x27;&#x27;</span>.join(tmp)</span><br><span class="line">    hashStr = sha1(tmpStr).hexdigest()</span><br><span class="line">    <span class="keyword">return</span> (hashStr == signature)</span><br></pre></td></tr></table></figure>

<p>验证成功之后，才能进入业务逻辑,当我们在微信公众号填写自己服务的URL的时候，weixin会向该URL发起Get请求.做为首次验证,根据文档，需要将接收到的字符串原文返回</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class serverHandler(BaseHandler):</span><br><span class="line">    def get(self):</span><br><span class="line">        echostr = self.get_argument(&#x27;echostr&#x27;, None)</span><br><span class="line">        self.write(echostr)</span><br></pre></td></tr></table></figure>


<p>#####. 菜单订制<br> 为了支持微信通信过程中不允许使用”&#x2F;u” 字符编码，这里用到了tornado的render_string,一开始我是直接生成一个json.dump(menu)然后post过去,但一直存在编码问题， 使用render_string就解决了。感谢@ihao提醒</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class UIHandler(tornado.web.RequestHandler):</span><br><span class="line">    def get(self):</span><br><span class="line">        msg = self.render_string(&#x27;menu.json&#x27;)</span><br><span class="line">        createMenu(menu)</span><br></pre></td></tr></table></figure>


<p>#####. 响应用户按键输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">xml = uni(self.request.body)        #获取微信服务器发送过来的xml,转化为unicode</span><br><span class="line">dic = xml2dict(xml)                 #将xml解析成dict</span><br><span class="line">if dic[&#x27;MsgType&#x27;].lower() == &#x27;event&#x27;:</span><br><span class="line">    event = dic[&#x27;Event&#x27;].lower()</span><br><span class="line">    if event == &#x27;subscribe&#x27;:</span><br><span class="line">        ctx = do_subscribe(dic)     #订阅逻辑</span><br><span class="line">        msg = self.render_string(&#x27;text_resp.xml&#x27;, dic=ctx)</span><br><span class="line">        self.write(msg)</span><br><span class="line">    elif event == &#x27;click&#x27;:</span><br><span class="line">        ctx = do_click(dic)         #点击逻辑</span><br><span class="line">        msg = self.render_string(&#x27;text_resp.xml&#x27;, dic=ctx)</span><br><span class="line">        self.write(msg)</span><br></pre></td></tr></table></figure>

<p>self.write(msg)是将要发给用户的信息返回给微信服务器，之后微信服务器会将信息发送给用户</p>
<h4 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h4><ul>
<li><a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/wiki/index.php">开发者文档</a></li>
<li><a target="_blank" rel="noopener" href="http://mp.weixin.qq.com/debug/">接口调试</a></li>
</ul>
<h4 id="开发中用到的库"><a href="#开发中用到的库" class="headerlink" title="开发中用到的库"></a>开发中用到的库</h4><ul>
<li><code>tornado</code></li>
<li><code>virtualenv</code></li>
<li><code>pyquery(做爬虫)</code></li>
<li><code>pymongo</code></li>
<li><code>lxml</code></li>
<li><code>urllib2</code></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/01/07/2014-01-07-wei-xin-gong-zhong-hao-kai-fa/" data-id="clnfj8m1d001s30qx5wemhxl1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2014-01-06-re-geng-xin" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/06/2014-01-06-re-geng-xin/" class="article-date">
  <time datetime="2014-01-06T12:58:00.000Z" itemprop="datePublished">2014-01-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Program/">Program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/06/2014-01-06-re-geng-xin/">热更新</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>  Server 端程序很多时候需要修改配置，这个时候如果重启服务就显得很不友好，代价也高。Nginx和Django，采用的是平滑启动.自动热更新,折腾的东西中遇到这样一个诉求，用python实现的话:</p>
<ol>
<li>当修改配置后,通过对比py的修改时间，来推断该模块是否被修改过,从而reload指定模块就可以在不重启服务的情况下读取修改的配置,</li>
<li>sys.module[‘modname’]返回的是该模块的pyc文件，而该文件是没有修改时间的，所以计算修改时间需要取py文件的属性</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> sys, os</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">auto_reload</span>():</span><br><span class="line">    mods = [<span class="string">&quot;test_config&quot;</span>]</span><br><span class="line">    <span class="keyword">for</span> mod <span class="keyword">in</span> mods:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            module = sys.modules[mod]</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        filename = module.__file__</span><br><span class="line">        <span class="built_in">print</span> filename</span><br><span class="line">        <span class="keyword">if</span> filename.endswith(<span class="string">&quot;.pyc&quot;</span>):</span><br><span class="line">            filename = filename.replace(<span class="string">&quot;.pyc&quot;</span>, <span class="string">&quot;.py&quot;</span>)</span><br><span class="line">            mod_time = os.path.getmtime(filename)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="string">&quot;loadtime&quot;</span> <span class="keyword">in</span> module.__dict__:</span><br><span class="line">            module.loadtime = <span class="number">0</span> <span class="comment"># first load&#x27;s time  1*</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">if</span> mod_time &gt; module.loadtime:</span><br><span class="line">                    reload(module)</span><br><span class="line">                <span class="keyword">except</span>:</span><br><span class="line">                    <span class="keyword">pass</span></span><br><span class="line">        module.loadtime = mod_time <span class="comment"># 2*</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">import</span> time</span><br><span class="line">    <span class="keyword">import</span> my_config</span><br><span class="line">    tmp = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        auto_reload()</span><br><span class="line">        <span class="keyword">if</span> test_config.address != tmp:</span><br><span class="line">        <span class="built_in">print</span> test_config.address</span><br><span class="line">        tmp = test_config.address</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>test_config.py</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">address = &quot;127.0.0.1&quot;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/01/06/2014-01-06-re-geng-xin/" data-id="clnfj8m1c001o30qx8vzt2jd1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2013-12-21-yu-jian" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/12/21/2013-12-21-yu-jian/" class="article-date">
  <time datetime="2013-12-21T08:16:00.000Z" itemprop="datePublished">2013-12-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Life/">Life</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/12/21/2013-12-21-yu-jian/">遇见</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>昨晚参加腾讯周年晚会,同事在YY今晚的明星是孙燕姿,可惜最后没有如他所愿”遇见”女神.当晚应邀表演的是同为15周年生日的羽泉.对于从来没有参加过大型演唱会的小白来说,人生又圆满了一点。</p>
<p>在见到 ponyMa 等人时我并没有兴奋。反而是深居简入的 AllenZhang 张小龙,让我小激动了一把,大学时起对这样的孤胆极客有神秘的敬仰.张小龙很少在公众媒体前曝光,留给外界的事迹大概是单挑 foxmail,QQmail 之父,缔造微信神话,产品哲学大师。 这样一位爱在深夜听摇滚,烟瘾十足的中年老男人,看上去依然有很浓的技术宅风格,开玩笑时略显不自然的腼腆.微微的驼背。 越是神秘,外界越会过度解读。小龙哥说希望未来可以让大家去”月球上打飞机”… 我虽然坐在内场,但是终究是靠后,只好通过屏幕看清楚的.曾经在南方通讯大厦的期待见到却没能见到的人此时出现了, 低调的风格有深深的内涵。</p>
<img src="/images/2013/12/Allen.jpg" class="">

<p>话说回来,同事虽然没有如愿听到孙燕姿,我却貌似被条件反射地提醒,浮现在脑海的是《遇见》,回来之后凭着某种鸡血,开始搜索曲子练习,在写这篇文章的时候, 可以弹出来。连续五个周末加班，突然可以自己安排时间,甚是知足。弹起琴的时候会忘掉很多东西。工作的事情依旧例行化,比较杂比较琐碎,出于责任心和对心境的自我锻炼(至少我是如此认为),内心有两种声音:</p>
<ul>
<li>年轻人要有一种吃苦的态度,对于工作的事情不要挑三拣四</li>
<li>年轻人应该勇敢去追求自己想要的东西,很明显我们愿意追求真善美与理想</li>
</ul>
<p>对于前者,践行后发觉职场的厚黑学,日子过得很忙很累,收获是有的。迷茫的是,收获的东西可能不是你的初心,会怀疑是否有意义,往往抗拒的时候,是凭着意志去承受。</p>
<p>对于后者,除了幸运到一定的程度才可能在中国实现吧,于是成为很多人的向往。 可以看到不少倔强的人没有放弃，因为有着的这样的情怀,所以不少人会对 Allen 这样的人物很敬仰,同样的还有云风.韩寒</p>
<img src="/images/2013/12/gitar.jpg" class="">

<p>我们以某种莫名的执着与生活妥协着,却期待现实与理想可以在某个点遇见彼此。我试着用这种方式写下这篇碎语,不知道你们看懂了么？</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/12/21/2013-12-21-yu-jian/" data-id="clnfj8m1c001q30qxgstici2e" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2013-12-05-zui-jin-yong-dao-de-mysql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/12/05/2013-12-05-zui-jin-yong-dao-de-mysql/" class="article-date">
  <time datetime="2013-12-05T15:01:00.000Z" itemprop="datePublished">2013-12-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/DataBase/">DataBase</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/12/05/2013-12-05-zui-jin-yong-dao-de-mysql/">最近用到的 MySql 语句</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>该文章没有什么创造性营养，也没有什么技术沉淀，各位看官轻轻带过，仅仅经验之谈，看过用过的人都会，简单的事情就平滑地带过。怎么让索然无味的文章更好地被他人深入阅读,要么就是实用，要么就是深刻，不扯淡, 直奔主题。</p>
<h3 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">desc Tbl;</span><br><span class="line">show create table Tbl;</span><br><span class="line">show full fields table Tbl;</span><br></pre></td></tr></table></figure>

<p>如果表有很多分区，导致很多打点刷屏，那么可以用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc Tbl/G;</span><br></pre></td></tr></table></figure>

<p>表太多的话，我的场景是2000张表,:(</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW TABLES LIKE &#x27;%tb%&#x27;;</span><br></pre></td></tr></table></figure>

<p>####查询数据库的字符集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#x27;%character%&#x27;;</span><br></pre></td></tr></table></figure>

<p>####指定字符集直连</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -h10.145.135.234 -uoss -pxxx dbName --default-character-set=gbk;</span><br></pre></td></tr></table></figure>

<p>####赋予权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show grants for &#x27;xxx&#x27;@&#x27;xxx.xxx.xxx.xxx&#x27;</span><br></pre></td></tr></table></figure>

<p>####如果想备份，或者复制表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table newtb select * from oldtable</span><br></pre></td></tr></table></figure>

<p>####修改表字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter tbA modify fieldA int(11) unsigned default &#x27;0&#x27;</span><br></pre></td></tr></table></figure>

<p>####移除字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table t2 drop column c;</span><br></pre></td></tr></table></figure>

<p>####修改主键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table tbA drop primary key;</span><br><span class="line">Alter table tbA add primary key(dtStatDate,File2)</span><br></pre></td></tr></table></figure>

<p>####查询当前数据库的查询进程,干掉挂起的query</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show processlist;</span><br><span class="line">kill pid</span><br></pre></td></tr></table></figure>

<p>####直接在shell外部命令行执行:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -h10.112.111.111 -uxxx -pxxxx dbname -Ns -e&quot;</span><br><span class="line">select distinct(iUin) from TableA where dtEventTime &gt;= &#x27;2013-05-05&#x27; </span><br><span class="line">&quot; &gt; records.txt;</span><br></pre></td></tr></table></figure>

<h4 id="排除重复记录"><a href="#排除重复记录" class="headerlink" title="排除重复记录"></a>排除重复记录</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INSERT IGNORE into</span><br><span class="line">Replace Into 是为了让主键替换原有的记录</span><br></pre></td></tr></table></figure>

<p>####load data infile语句<br>从一个文本文件中以很高的速度读入一个表中。使用这个命令之前，mysqld进程（服务）必须已经在运行。为了安全原因，当读取位于服务器上的文本文件时，文件必须处于数据库目录或可被所有人读取。另外，为了对服务器上文件使用load data infile，在服务器主机上你必须有file的权限。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">load data infile &quot;/home/Order txt&quot; into table Orders(Order_Number, Order_Date, Customer_ID) terminated by&#x27;,&#x27;;</span><br></pre></td></tr></table></figure>

<h4 id="mysqldump-中解决-报”Access-denied-for-user-when-using-LOCK-TABLES”"><a href="#mysqldump-中解决-报”Access-denied-for-user-when-using-LOCK-TABLES”" class="headerlink" title="mysqldump 中解决 报”Access denied for user when using LOCK TABLES”"></a>mysqldump 中解决 报”Access denied for user when using LOCK TABLES”</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -udbuser -p dbname --skip-lock-tables &gt; dbname.sql</span><br></pre></td></tr></table></figure>

<p>####监控数据库磁盘增长量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use information_schema;</span><br><span class="line">#库的大小</span><br><span class="line">select concat(round(sum(DATA_LENGTH/1024/1024),2),&#x27;MB&#x27;) as data  from TABLES where table_schema=&#x27;db1&#x27;;</span><br></pre></td></tr></table></figure>

<p>####时间函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM_UNIXTIME(iLoginTime,&#x27;%Y-%m-%d&#x27;)</span><br><span class="line">unix_timestamp(&#x27;2013-12-03&#x27;);</span><br><span class="line">Date_SUB(OrderDate,INTERVAL 2 DAY)</span><br><span class="line">Date_ADD(OrderDate,INTERVAL 2 DAY)</span><br><span class="line">timestampdiff(week,’2009-01-24′,’2009-06-20′);</span><br></pre></td></tr></table></figure>

<p>####no exist,having<br>适合做留存用户分析</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SELECT distinct field1</span><br><span class="line">FROM table a</span><br><span class="line">where date &lt;= 20130430 and</span><br><span class="line">not exists (</span><br><span class="line">        SELECT field1 FROM table b where date&gt;=20130501 and a.field1=b.field1</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">#举例子,可以计算第一次创建用户的人</span><br><span class="line">select * from TbRole having min(CreateTime) between &#x27;xxx&#x27; and &#x27;xxx&#x27; </span><br></pre></td></tr></table></figure>

<p>####mysql 逻辑运算,好像在编程的样子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">case condition1</span><br><span class="line">when result1 then &#x27;xx&#x27;</span><br><span class="line">when result2 then &#x27;xx&#x27;</span><br><span class="line">else result1 then &#x27;xx&#x27;</span><br><span class="line">end as &#x27;xx&#x27;</span><br><span class="line"></span><br><span class="line">ifnull(a,b) #如果a不为空的情况下执行a,否则执行b</span><br><span class="line">if(condition,a,b)#如果符合condition 执行a,否则执行b</span><br></pre></td></tr></table></figure>

<p>####妙用group by<br>可以在group by 里面做逻辑运算, 缩小逻辑范围</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * From tableA group by (round(field1/100,0));</span><br></pre></td></tr></table></figure>

<p>####格式化字符串类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">concat(&#x27;a&#x27;,&#x27;b&#x27;)</span><br></pre></td></tr></table></figure>

<p>####mysql的临时变量‘@’<br>以下sql是取各道具排前10的等级</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select * from (</span><br><span class="line">    select dtStatDate,iRoleLevel,iUserNum,</span><br><span class="line">    if(@templevel=a.iRoleLevel,@tno:=@tno+1,@tno:=1) as tno,@templevel:=a.iRoleLevel </span><br><span class="line">    from tbl_a , (SELECT @tno:= 0,@templevel:=null) tbl_b</span><br><span class="line">    order by a.iRoleLevel asc,a.iUserNum desc</span><br><span class="line">) c</span><br><span class="line">where tno&lt;=10 order by iRoleLevel asc</span><br></pre></td></tr></table></figure>

<p>####其他<br>union all 效率会比union高,因为union有去重功能,会耗时 </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/12/05/2013-12-05-zui-jin-yong-dao-de-mysql/" data-id="clnfj8m1b001m30qx5rge6yeq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2013-10-10-shui-de-xin-jing" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/11/10/2013-10-10-shui-de-xin-jing/" class="article-date">
  <time datetime="2013-11-10T13:29:00.000Z" itemprop="datePublished">2013-11-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Life/">Life</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/11/10/2013-10-10-shui-de-xin-jing/">上善若水-想和这段生活谈谈</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>来深圳已经四个多月了，我不会扯淡地说些恍如隔日，白驹过隙之云，就我真实的感受而言，这些日子发生了很多事情，感觉经历了不少事情。关键字是： <em><strong>MiniGame比赛，后苑生活，吉他，折腾捣鼓</strong></em></p>
<img src="/images/2013/10/Gitar.jpg" class="">
<img src="/images/2013/10/Violin.jpg" class="">

<p>本以为音乐会随着时光离我远去，原来它一直都在。小时候学过小提琴，后来因为羡慕同龄人可以一起踢球玩耍而渐渐荒废，每次面对房间里那把吉他心中不免有些愧疚，想拿起来练却因为种种原因作罢，归咎于我的无能吧。毕业前夕，邂逅吉他。开始新的音乐旅程.无数次的脱皮结茧也没有打消我的热情，疯狂爱上优美的弦音。虽不能说废寝忘食，却也可以每天自学一段时间，现在算是可以弹奏喜欢的歌曲。有一天当我教宿舍的朋友如何入门的时候，突然感觉自己已经在喜欢的路上走了一段距离。那时候看看手里的茧,听着手中指弹的发声，瞬间感动。这背后，是心性的变化。沉淀下来是可以做不少你曾经觉得甚是神奇的事情.</p>
<p><em><strong>上善若水，水善利万物而不争。天下柔者莫过于水,而能攻者有莫过于水。</strong></em><br>来深的这段时间里，我想这是我最大的收获。我喜欢这句话。</p>
<p>心态的变化体现在对技术折腾上。曾经在时间，任务，压力面前我总是妥协倾向更快速解决问题。这样，知其然不知其所以然的祸根就埋下了，也伴有一些焦急，<em><strong>“一件事情如果你说不好，十有八九你是做不好的”</strong></em>。当然我依然改变不了捣鼓研究的热情，转变的是，我更愿意以一种好奇求问的心态，想想他们适合怎样的场景，在允许的情况下，我很乐意探其究竟。从细节中去发现美。曾以为会花费不少时间，如今看来，倒是在效率上给我带来了很大的提高，思维上也改造了不少 ：）.这几天疯狂地满足了折腾的欲望</p>
<ul>
<li>折腾ArchLinux，</li>
<li>阅读完一本《MongoDb权威指南》</li>
<li>开发一个chrome插件,稍后会把经验分享给大家</li>
<li>博客做了改版，也顺带理清了octopress的框架,给他加了不少插件。</li>
</ul>
<p>捣鼓的热情，可以让人忘记时间甚至烦恼，沉浸在知识的海洋，也会为自己小小欣慰一把，这种小情绪怡然自得，如果你也是个不安分的人，相信你在此刻会有共鸣。</p>
<p>提起工作，必须承认，离开有2年半感情的<a target="_blank" rel="noopener" href="http://youmi.net/">Youmi</a>，它有我大学一半的青春与回忆，对我来说是一个不容易的事情，我爱那里的人，初创团队的KISS，让我感受到很强的工程师文化，i like it。那里有我的可敬的精神<a target="_blank" rel="noopener" href="http://sysrt.net/">偶像</a>，但我希望我的人生多一些阅历，于是在毕业的岔口我来到了tx。选择没有对错，这一路总有不同的风景，</p>
<p>在大公司，不可避免，我做的是螺丝钉般很琐碎的工作，很诚实地说，基本无技术上的锻炼,很长一段时间也将是。这一直是我内心一个心结。这对热爱技术的我，算是一种无奈吧。只能靠自己更高效地工作争取会宿舍去捣鼓消化技术的热情，真的很羡慕那些工程师味道浓厚，真正做事，创造价值的团队，每每在微博看到业界意见领袖（<a target="_blank" rel="noopener" href="http://coolshell.cn/">@coolshell</a>,<a target="_blank" rel="noopener" href="http://dbanotes.net/">@Fenng</a>..）的团队，便会像阿Q一样自嘲下自己,也好，多些经历也是好事，这样我会更加鞭策着去努力。话说回来，无论光景怎么变，我能做的就是始终都不能放弃学习与积累。这个过程中本身就是一件很开心的事情。很欣喜的是这一路我并不孤单，<a target="_blank" rel="noopener" href="http://everet.org/">华亮</a>和我也是一样在努力着。</p>
<p>在平淡，甚至有点黯然失色的日子里，携安静的内心,还有吉他与代码，多一份坦然，多一份汗水，多一份坚持去面对生活，感悟生活，这是我对“上善若水”的理解。文字还是稚嫩，写这文章的心情是平静,不带偏激和情绪，我想和这段生活谈谈。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/11/10/2013-10-10-shui-de-xin-jing/" data-id="clnfj8m1b001k30qx4avqghae" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2013-09-29-zerorpcshi-ge-hao-dong-xi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/09/29/2013-09-29-zerorpcshi-ge-hao-dong-xi/" class="article-date">
  <time datetime="2013-09-29T12:56:00.000Z" itemprop="datePublished">2013-09-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/NetWork/">NetWork</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/09/29/2013-09-29-zerorpcshi-ge-hao-dong-xi/">ZeroRPC-基于ZMQ的RPC通讯库</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://www.dotcloud.com/">dotCloud</a> 是一家具有伟大基因的公司,我认为的伟大是有着开源贡献的情怀，就像Amazon,Google等，而不是国内的某些巨头，虽然作为新兴的云服务提供商还不足以比肩巨头，致力于用技术解决公司的运营问题的同时也回馈社会，让我为之喝彩.我也有理由相信这样的公司会走的更远，因为他们有胸怀有远见，是否重视技术就更不言而喻了.</p>
<p>这篇文章旨在介绍由<strong>dotCloud</strong>开源的<a target="_blank" rel="noopener" href="https://github.com/dotcloud/zerorpc-python">ZeroRpc</a>,在dotcloud公司的基础服务得到很大应用，在阅读其manual之后更是被其简洁明了的使用方法所吸引 </p>
<blockquote>
<p>ZeroRPC is a modern communication layer for distributed systems built on top of ZeroMQ,</p>
</blockquote>
<p>一直以来我一直喜欢python 的简洁，用过ZeroMQ做过网络通讯方面的编程，也使用RPC 做过远程过程调用，上次使用LevelDB的RPC是用python的[第三方库] (<a target="_blank" rel="noopener" href="https://github.com/dotcloud/zerorpc-python">https://github.com/dotcloud/zerorpc-python</a>)</p>
<p>这次刚好在Github上面看到这样的好玩意，便想与大家分享,ZeroRpc不仅仅支持代码层面的调用，也支持CLi， 这种设计本身就很有弹性.赞！</p>
<p>安装zerorpc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install zerorpc </span><br></pre></td></tr></table></figure>

<p>在还没开始看demo之前<br>我们需要了解ZeroRpc是由三层架构组成：</p>
<ul>
<li>传输层是使用<a target="_blank" rel="noopener" href="http://www.zeromq.org/">ZMQ</a> 以及msgpack(<a target="_blank" rel="noopener" href="http://msgpack.org/),%E5%9F%BA%E4%BA%8EZeroMQ%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E9%80%9A%E8%AE%AF%E5%B1%82,%E9%80%9A%E8%AE%AF%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A2%ABMsgPack">http://msgpack.org/),基于ZeroMQ的分布式通讯层,通讯的数据被MsgPack</a> 序列化过所以更快</li>
<li>消息层,比较复杂,处理heartbeat, multiplexing, and events.</li>
<li>RPC层:处理请求,响应</li>
</ul>
<p>官方的<a target="_blank" rel="noopener" href="http://zerorpc.dotcloud.com/">文档</a>给出以下demo</p>
<p>####server.py #####</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zerorpc</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HelloRPC</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">hello</span>(<span class="params">self, name</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, %s&quot;</span> % name</span><br><span class="line"></span><br><span class="line">s = zerorpc.Server(HelloRPC())</span><br><span class="line">s.bind(<span class="string">&quot;tcp://0.0.0.0:4242&quot;</span>)</span><br><span class="line">s.run()</span><br></pre></td></tr></table></figure>

<p>####client.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zerorpc</span><br><span class="line"></span><br><span class="line">c = zerorpc.Client()</span><br><span class="line">c.connect(<span class="string">&quot;tcp://127.0.0.1:4242&quot;</span>)</span><br><span class="line"><span class="built_in">print</span> c.hello(<span class="string">&quot;RPC&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>client也可用命令行代替</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zerorpc tcp://<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">4242</span> hello RPC</span><br></pre></td></tr></table></figure>

<p>够简明易懂了吧<br>再来一个返回连续字节流的例子</p>
<p>####server.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zerorpc</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StreamingRPC</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line"><span class="meta">    @zerorpc.stream</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">streaming_range</span>(<span class="params">self, fr, to, step</span>):</span><br><span class="line">        <span class="keyword">return</span> xrange(fr, to, step)</span><br><span class="line"></span><br><span class="line">s = zerorpc.Server(StreamingRPC())</span><br><span class="line">s.bind(<span class="string">&quot;tcp://0.0.0.0:4242&quot;</span>)</span><br><span class="line">s.run()</span><br></pre></td></tr></table></figure>

<p>####client.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zerorpc</span><br><span class="line"></span><br><span class="line">c = zerorpc.Client()</span><br><span class="line">c.connect(<span class="string">&quot;tcp://127.0.0.1:4242&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> c.streaming_range(<span class="number">10</span>, <span class="number">20</span>, <span class="number">2</span>):</span><br><span class="line">    <span class="built_in">print</span> item</span><br></pre></td></tr></table></figure>

<p>client也可用命令行代替,–json 表示头部是一个json对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zerorpc tcp://127.0.0.1:4242 streaming_range 10 20 2 --json</span><br></pre></td></tr></table></figure>

<p>Happy Hacking</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/09/29/2013-09-29-zerorpcshi-ge-hao-dong-xi/" data-id="clnfj8m1b001i30qx15wwagzd" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2013-09-28-shellji-qiao-xiao-jie" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/09/28/2013-09-28-shellji-qiao-xiao-jie/" class="article-date">
  <time datetime="2013-09-28T14:52:00.000Z" itemprop="datePublished">2013-09-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Program/">Program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/09/28/2013-09-28-shellji-qiao-xiao-jie/">Bash Shell 技巧小结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>使用 shell 获取进程，并删除</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#取得当前进程号</span><br><span class="line">current_pid=$$</span><br><span class="line">#获得特定进程号并重定向到一个临时文件中</span><br><span class="line">ps -aux|grep &quot;/usr/sbin/httpd&quot; | grep -v &quot;grep&quot;| awk &#x27;&#123;print $2&#125;&#x27; &gt;/tmp/$&#123;current_pid&#125;.txt</span><br><span class="line">#commands start</span><br><span class="line">for pid in `cat /tmp/$&#123;current_pid&#125;.txt`</span><br><span class="line">do</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;kill -9 $pid&quot;</span><br><span class="line">    kill -9 $pid</span><br><span class="line">&#125;</span><br><span class="line">done </span><br><span class="line">rm -f /tmp/$&#123;current_pid&#125;.txt </span><br></pre></td></tr></table></figure>

<ul>
<li>shell 的函数处理</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">func()</span><br><span class="line">&#123;</span><br><span class="line">    echo $a $b $c</span><br><span class="line">    echo $1 $2 $3</span><br><span class="line">&#125;</span><br><span class="line">a=&quot;aaa&quot;</span><br><span class="line">b=&quot;bbb&quot;</span><br><span class="line">c=&quot;ccc&quot;</span><br><span class="line">func $a e f</span><br></pre></td></tr></table></figure>

<p>函数传参是通过 funcname $para1 $para2 …,函数内部是使用$1,$2,$3<br>结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aaa bbb ccc</span><br><span class="line">aaa e f </span><br></pre></td></tr></table></figure>

<ul>
<li>信号捕捉<br>trap可以使你在脚本中捕捉信号，命令形式为trap name signal(s)<br>其中,name是捕捉到信号以后所采取的一系列操作。实际中，name一般是一个专门用来处理所捕捉信号的函数。name需要用双引号（“”）引起来。signal是待捕捉的信号。<br>最常见的行动包括： 清除临时文件 忽略该信号(如trap “” 23) 询问用户是否终止该脚本进程</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">trap &#x27;exitprocess&#x27; 2　　　　#捕捉到信号２之后执行exitprocess function</span><br><span class="line">LOOP=0</span><br><span class="line">function exitprocess()</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;You Just hit &lt;CTRL-C&gt;, at number $LOOP&quot;</span><br><span class="line">    echo &quot;I will now exit&quot;</span><br><span class="line">    exit 1</span><br><span class="line">&#125;</span><br><span class="line">while : # 循环直到捕捉到信号（注意中间的空格） </span><br><span class="line">do</span><br><span class="line">    LOOP=$LOOP+1</span><br><span class="line">    echo $LOOP</span><br><span class="line">    sleep 1</span><br><span class="line">done </span><br></pre></td></tr></table></figure>

<p>给一个文本，获取其中2000 ~ 3000 行怎么破？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat data.txt | tail -n +2000 | head -n 1000 &gt; result.txt</span><br></pre></td></tr></table></figure>

<p>查找文件是否存在</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /data -name hello.cpp </span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/09/28/2013-09-28-shellji-qiao-xiao-jie/" data-id="clnfj8m1a001g30qxbvcw2imh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2013-09-22-dan-ji-wan-hadoop" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/09/22/2013-09-22-dan-ji-wan-hadoop/" class="article-date">
  <time datetime="2013-09-22T10:11:00.000Z" itemprop="datePublished">2013-09-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Server/">Server</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/09/22/2013-09-22-dan-ji-wan-hadoop/">单机玩Hadoop</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>以前在Amazon Web Service<a target="_blank" rel="noopener" href="http://aws.amazon.com/">AWS</a> 做过Hadoop 运算，处理业务逻辑，当时也曾在自己电脑做一个单一的节点模拟.在Tencent 有机会处理tencent 游戏的海量数据分析，这时候用到的是公司的TDW,也是基于Hadoop 的改造。大数据被炒的火热，特别是某些公司会把这些当作自我标榜更是让人恶心.本着折腾的信，把自己玩hadoop的过程写下来 ：）</p>
<ul>
<li>创建hadoop用户组;</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo addgroup hadoop</span><br><span class="line">sudo adduser -ingroup hadoop hadoop</span><br></pre></td></tr></table></figure>

<p>给hadoop用户添加权限，编辑&#x2F;etc&#x2F;sudoers文件; 在root   ALL&#x3D;(ALL:ALL)   ALL下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop  ALL=(ALL:ALL) ALL</span><br></pre></td></tr></table></figure>

<ul>
<li>在Ubuntu下安装JDK</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-add-repository ppa:flexiondotorg/java</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install sun-java6-jre sun-java6-jdk sun-java6-plugin</span><br></pre></td></tr></table></figure>
<p>如果你在第二条命令遇到错误:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">W: GPG 错误：http://ppa.launchpad.net precise Release: 由于没有公钥，无法验证下列签名： NO_PUBKEY 2EA8F35793D8809A</span><br><span class="line">请执行</span><br><span class="line">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 2EA8F35793D8809A  </span><br></pre></td></tr></table></figure>

<p>编辑 sudo vi &#x2F;etc&#x2F;environment<br>在其中添加如下两行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/usr/lib/jvm/java-6-sun</span><br><span class="line">CLASSPATH=.:/usr/lib/jvm/java-6-sun/lib</span><br></pre></td></tr></table></figure>

<ul>
<li>安装ssh 服务</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ssh openssh-server</span><br></pre></td></tr></table></figure>

<p>首先要转换成hadoop用户，执行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - hadoop</span><br></pre></td></tr></table></figure>

<p>采用 rsa 方式 生成key</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -P &quot;&quot;</span><br></pre></td></tr></table></figure>

<p>进入~&#x2F;.ssh&#x2F;目录下，将id_rsa.pub追加到authorized_keys授权文件中,使其无密码登录本机</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.ssh</span><br><span class="line">cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure>

<ul>
<li>下载<a target="_blank" rel="noopener" href="http://www.apache.org/dyn/closer.cgi/hadoop/common/">hadoop</a>,并安装</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo cp hadoop-0.20.203.0rc1.tar.gz /usr/local/</span><br></pre></td></tr></table></figure>

<p>解压hadoop-0.20.203.tar.gz；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local</span><br><span class="line">sudo tar -zxf hadoop-0.20.203.0rc1.tar.gz</span><br></pre></td></tr></table></figure>

<p>将解压出的文件夹改名为hadoop;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv hadoop-0.20.203.0 hadoop</span><br></pre></td></tr></table></figure>

<p>将该hadoop文件夹的属主用户设为hadoop，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R hadoop:hadoop hadoop</span><br></pre></td></tr></table></figure>

<p>打开hadoop&#x2F;conf&#x2F;hadoop-env.sh文件;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi hadoop/conf/hadoop-env.sh</span><br></pre></td></tr></table></figure>

<p>配置conf&#x2F;hadoop-env.sh,配置本机jdk的路径;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/lib/jvm/java-6-sun/</span><br><span class="line">export HADOOP_HOME=/usr/local/hadoop</span><br><span class="line">export PATH=$PATH:/usr/local/hadoop/bin</span><br></pre></td></tr></table></figure>

<p>记得source hadoop-env.sh </p>
<p>编辑conf&#x2F;core-site.xml文件;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span><br><span class="line">&lt;!-- Put site-specific property overrides in this file. --&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;  </span><br><span class="line">        &lt;name&gt;fs.default.name&lt;/name&gt;  </span><br><span class="line">        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;   </span><br><span class="line">    &lt;/property&gt;  </span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<p>编辑conf&#x2F;mapred-site.xml文件;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span><br><span class="line">&lt;!-- Put site-specific property overrides in this file. --&gt;</span><br><span class="line">&lt;configuration&gt;  </span><br><span class="line">     &lt;property&gt;   </span><br><span class="line">           &lt;name&gt;mapred.job.tracker&lt;/name&gt;  </span><br><span class="line">            &lt;value&gt;localhost:9001&lt;/value&gt;   </span><br><span class="line">      &lt;/property&gt;  </span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<p>编辑conf&#x2F;hdfs-site.xml文件;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;dfs.name.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/usr/local/hadoop/datalog1,/usr/local/hadoop/datalog2&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;dfs.data.dir&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;/usr/local/hadoop/data1,/usr/local/hadoop/data2&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;property&gt;</span><br><span class="line">        &lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">        &lt;value&gt;2&lt;/value&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>运行hadoop,并启动</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/hadoop/</span><br><span class="line">bin/hadoop namenode -format // 进入hadoop目录下，格式化hdfs文件系统</span><br><span class="line">bin/start-all.sh //启动脚本</span><br></pre></td></tr></table></figure>

<p>检测hadoop是否启动成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hadoop@hp:/usr/local/hadoop/bin$ sudo jps</span><br><span class="line">11822 DataNode</span><br><span class="line">12461 Jps</span><br><span class="line">11581 NameNode</span><br><span class="line">12157 JobTracker</span><br><span class="line">12064 SecondaryNameNode</span><br><span class="line">12377 TaskTracker</span><br></pre></td></tr></table></figure>

<p>说明hadoop单机版环境配置好了<br>此时访问<a target="_blank" rel="noopener" href="http://localhost:50030/">http://localhost:50030/</a>,便可以看到管理界面</p>
<img src="/images/2013/09/hadoop.png" class="">
<p>让我们来完成那篇著名论文的wordcounw吧</p>
<p>创建输入文件夹,并挂载hdfs</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hadoop@hp:/usr/local/hadoop$ mkdir input //创建输入文件夹</span><br><span class="line">hadoop@hp:/usr/local/hadoop$ cp conf/* input</span><br><span class="line">hadoop@hp:/usr/local/hadoop$ bin/hadoop fs -put input/ input</span><br></pre></td></tr></table></figure>

<p>执行wordcount程序,输入为input，输出数据目录为output。,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/hadoop jar hadoop-examples-0.20.203.0.jar wordcount input output</span><br></pre></td></tr></table></figure>

<p>出现了运行情况如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">13/09/22 17:59:40 INFO input.FileInputFormat: Total input paths to process : 15</span><br><span class="line">13/09/22 17:59:41 INFO mapred.JobClient: Running job: job_201309221738_0006</span><br><span class="line">13/09/22 17:59:42 INFO mapred.JobClient:  map 0% reduce 0%</span><br><span class="line">13/09/22 17:59:58 INFO mapred.JobClient:  map 13% reduce 0%</span><br><span class="line">13/09/22 18:00:07 INFO mapred.JobClient:  map 26% reduce 0%</span><br><span class="line">13/09/22 18:00:16 INFO mapred.JobClient:  map 40% reduce 8%</span><br><span class="line">13/09/22 18:00:22 INFO mapred.JobClient:  map 53% reduce 13%</span><br><span class="line">13/09/22 18:00:28 INFO mapred.JobClient:  map 66% reduce 13%</span><br><span class="line">13/09/22 18:00:31 INFO mapred.JobClient:  map 66% reduce 17%</span><br><span class="line">13/09/22 18:00:34 INFO mapred.JobClient:  map 80% reduce 17%</span><br><span class="line">13/09/22 18:00:37 INFO mapred.JobClient:  map 80% reduce 22%</span><br><span class="line">13/09/22 18:00:40 INFO mapred.JobClient:  map 93% reduce 22%</span><br><span class="line">13/09/22 18:00:46 INFO mapred.JobClient:  map 100% reduce 26%</span><br><span class="line">13/09/22 18:00:55 INFO mapred.JobClient:  map 100% reduce 100%</span><br><span class="line">13/09/22 18:01:00 INFO mapred.JobClient: Job complete: job_201309221738_0006</span><br><span class="line">13/09/22 18:01:00 INFO mapred.JobClient: Counters: 25</span><br><span class="line">13/09/22 18:01:00 INFO mapred.JobClient:   Job Counters </span><br></pre></td></tr></table></figure>

<p>查看执行结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop@hp:/usr/local/hadoop$ bin/hadoop fs -cat output/*</span><br></pre></td></tr></table></figure>

<p>截取部分结果现场</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">hadoop@hp:/usr/local/hadoop$ hadoop fs -cat output/*</span><br><span class="line">&quot;&quot;. 4</span><br><span class="line">&quot;*&quot; 10</span><br><span class="line">&quot;alice,bob  10</span><br><span class="line">&quot;console&quot;   1</span><br><span class="line">&quot;hadoop.root.logger&quot;.   1</span><br><span class="line">&quot;jks&quot;.  4</span><br><span class="line">   79</span><br><span class="line">$HADOOP_BALANCER_OPTS&quot;   1</span><br><span class="line">$HADOOP_DATANODE_OPTS&quot;   1</span><br><span class="line">$HADOOP_HOME/conf/slaves 1</span><br><span class="line">$HADOOP_HOME/logs    1</span><br><span class="line">$HADOOP_JOBTRACKER_OPTS&quot; 1</span><br><span class="line">$HADOOP_NAMENODE_OPTS&quot;   1</span><br><span class="line">$HADOOP_SECONDARYNAMENODE_OPTS&quot;  1</span><br></pre></td></tr></table></figure>

<p>停止hadoop</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop@hp:/usr/local/hadoop$ ./stop-all.sh </span><br></pre></td></tr></table></figure>

<p>hadoop这只小象在单机可以这么玩</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/09/22/2013-09-22-dan-ji-wan-hadoop/" data-id="clnfj8m1a001e30qxbpufaqwt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2013-09-21-leveldbben-di-cun-chu-yin-qing-jing-zhi-de-gong-ju" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/09/21/2013-09-21-leveldbben-di-cun-chu-yin-qing-jing-zhi-de-gong-ju/" class="article-date">
  <time datetime="2013-09-21T01:42:00.000Z" itemprop="datePublished">2013-09-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/DataBase/">DataBase</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/09/21/2013-09-21-leveldbben-di-cun-chu-yin-qing-jing-zhi-de-gong-ju/">leveldb本地存储引擎-精致的工具</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> leveldb是一个google实现的非常高效的kv数据库，能够支持billion级别的数据量了。 在这个数量级别下还有着非常高的性能，主要归功于它的良好的设计。特别是LSM算法。 LevelDB 是单进程的服务，性能非常之高，在一台4个Q6600的CPU机器上，每秒钟写数据超过40w，而随机读的性能每秒钟超过10w。@ideawu的ssdb就是基于Leveldb引擎开发的，看起来很NB的样子 </p>
<p>它只是一个本地存储引擎:</p>
<ul>
<li>k&#x2F;v db library，提供持久化 </li>
<li>No Server </li>
<li>No cache<br>于是它精巧。</li>
</ul>
<blockquote>
<p>talk is cheap ,Show me the Code</p>
</blockquote>
<p>简单示范一下C++使用Leveldb ,要先下载leveldb源码编译<a target="_blank" rel="noopener" href="https://github.com/basho/leveldb">code</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#include&lt;iostream&gt;  </span></span><br><span class="line"><span class="comment">#include&lt;string&gt;  </span></span><br><span class="line"><span class="comment">#include&quot;leveldb/db.h&quot;  </span></span><br><span class="line"></span><br><span class="line">using namespace std;  </span><br><span class="line">using namespace leveldb;  </span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> main()  </span><br><span class="line">&#123;  </span><br><span class="line">    DB *db;  </span><br><span class="line">    Options options;  </span><br><span class="line">    options.create_if_missing = true;  </span><br><span class="line">    Status s = DB::Open(options,<span class="string">&quot;/data/leveldb/lvd.db&quot;</span>,&amp;db);  </span><br><span class="line">    <span class="keyword">if</span>(!s.ok())&#123;  </span><br><span class="line">        cerr &lt;&lt; s.ToString() &lt;&lt; endl;</span><br><span class="line">    &#125;  </span><br><span class="line">    string key = <span class="string">&quot;name&quot;</span>,val = <span class="string">&quot;leveldb&quot;</span>;  </span><br><span class="line">    s = db-&gt;Put(WriteOptions(),key,val);  </span><br><span class="line">    <span class="keyword">if</span>(!s.ok())&#123;  </span><br><span class="line">        cerr &lt;&lt; s.ToString() &lt;&lt; endl; </span><br><span class="line">    &#125;  </span><br><span class="line">    s = db-&gt;Get(ReadOptions(),key,&amp;val);  </span><br><span class="line">    <span class="keyword">if</span>(s.ok())&#123;  </span><br><span class="line">        cout &lt;&lt; key &lt;&lt; <span class="string">&quot;=&quot;</span> &lt;&lt; val &lt;&lt; endl;  </span><br><span class="line">        s = db-&gt;Put(leveldb::WriteOptions(),<span class="string">&quot;key2&quot;</span>,val);  </span><br><span class="line">        <span class="keyword">if</span>(s.ok())&#123;  </span><br><span class="line">            s = db-&gt;Delete(leveldb::WriteOptions(),key);  </span><br><span class="line">            <span class="keyword">if</span>(!s.ok())&#123;  </span><br><span class="line">                cerr &lt;&lt; s.ToString() &lt;&lt; endl;</span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">                                                                                                                                    &#125;  </span><br></pre></td></tr></table></figure>

<p>编译方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ testleveldb.cpp -o main -I./Include -l./ -lleveldb -lrt</span><br></pre></td></tr></table></figure>

<p>执行.&#x2F;main 之后便可以看到,leveldb的存储文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">zj@hp:~/lvd.db$ tree</span><br><span class="line">.</span><br><span class="line">├── 000003.log</span><br><span class="line">├── CURRENT</span><br><span class="line">├── LOCK</span><br><span class="line">├── LOG</span><br><span class="line">├── MANIFEST-000002</span><br><span class="line">├── sst_0</span><br><span class="line">├── sst_1</span><br><span class="line">├── sst_2</span><br><span class="line">├── sst_3</span><br><span class="line">├── sst_4</span><br><span class="line">├── sst_5</span><br><span class="line">└── sst_6</span><br></pre></td></tr></table></figure>

<p>很多语言都给予了binding,那么python 也不例外了 ：） <a target="_blank" rel="noopener" href="https://github.com/rjpower/py-leveldb">py-leveldb</a><br>你需要先安装python-leveldb库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> leveldb</span><br><span class="line">db = leveldb.LevelDB(<span class="string">&#x27;./db&#x27;</span>)</span><br><span class="line">db.Put(<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> db.Get(<span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>如果你也和我一样蛋疼，你会不会想会有Server可以调用呢，再看下一篇吧 ：）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2013/09/21/2013-09-21-leveldbben-di-cun-chu-yin-qing-jing-zhi-de-gong-ju/" data-id="clnfj8m19001c30qxdga6h223" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/9/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/11/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/DataBase/">DataBase</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/ElasticSearch/">ElasticSearch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Go/">Go</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/NLP/">NLP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/NetWork/">NetWork</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Product/">Product</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Program/">Program</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Server/">Server</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/">System</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/grpc/">grpc</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/k8s/">k8s</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mq/">mq</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithm/" rel="tag">Algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-11/" rel="tag">C++11</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataBase/" rel="tag">DataBase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Go/" rel="tag">Go</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/" rel="tag">Kafka</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LRU/" rel="tag">LRU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MQ/" rel="tag">MQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ProtoBuffer/" rel="tag">ProtoBuffer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/System/" rel="tag">System</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/groupCache/" rel="tag">groupCache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grpc/" rel="tag">grpc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s-basic/" rel="tag">k8s basic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx-grpc/" rel="tag">nginx grpc</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/tags/C-11/" style="font-size: 10px;">C++11</a> <a href="/tags/DataBase/" style="font-size: 10px;">DataBase</a> <a href="/tags/Go/" style="font-size: 10px;">Go</a> <a href="/tags/Kafka/" style="font-size: 10px;">Kafka</a> <a href="/tags/LRU/" style="font-size: 10px;">LRU</a> <a href="/tags/MQ/" style="font-size: 10px;">MQ</a> <a href="/tags/ProtoBuffer/" style="font-size: 10px;">ProtoBuffer</a> <a href="/tags/Redis/" style="font-size: 16.67px;">Redis</a> <a href="/tags/System/" style="font-size: 10px;">System</a> <a href="/tags/groupCache/" style="font-size: 10px;">groupCache</a> <a href="/tags/grpc/" style="font-size: 13.33px;">grpc</a> <a href="/tags/k8s/" style="font-size: 20px;">k8s</a> <a href="/tags/k8s-basic/" style="font-size: 10px;">k8s basic</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx-grpc/" style="font-size: 10px;">nginx grpc</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07/">July 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/05/">May 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">March 2012</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/10/20/2021-10-20-why-docker-supervisor/"> Docker里使用 supervisor 管理多个程序</a>
          </li>
        
          <li>
            <a href="/2021/10/14/2021-10-14-binary-tree-algo/">二叉树相关的递归算法题</a>
          </li>
        
          <li>
            <a href="/2021/10/13/2021-10-13-go-channel/">Go Channel 笔记</a>
          </li>
        
          <li>
            <a href="/2021/10/12/2021-10-12-why-kafka-so-fast/">Kafka 吞吐量大的原因</a>
          </li>
        
          <li>
            <a href="/2021/10/11/2021-10-11-redis-pipeline/">Redis Pipline 与事务</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 zheng-ji<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>